{"ast":null,"code":"var _jsxFileName = \"/home/vinicius/atividades/q2/entregas/5A12/react-entrega-s5-hamburgueria-2-0-com-typescript-json-server-vinapro91/src/Provider/authToken.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { createContext, useCallback, useContext, useState } from \"react\";\nimport { api } from \"../Services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext({});\n\nconst useAuth = () => {\n  _s();\n\n  const context = useContext(AuthContext);\n\n  if (!context) {\n    throw new Error(\"useAuth must be used witching an AuthProvider\");\n  }\n\n  return context;\n};\n\n_s(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nconst AuthProvider = ({\n  children\n}) => {\n  _s2();\n\n  const [data, seteData] = useState(() => {\n    const accessToken = localStorage.getItem(\"@HamburgueriaKenzie:accessToken\");\n    const user = localStorage.getItem(\"@HamburgueriaKenzie:user\");\n\n    if (accessToken && user) {\n      return {\n        accessToken,\n        user: JSON.parse(user)\n      };\n    }\n\n    return {};\n  });\n  const singIn = useCallback(async ({\n    email,\n    password\n  }) => {\n    const response = await api.post(\"/login\", {\n      email,\n      password\n    });\n    const {\n      accessToken,\n      user\n    } = response.date;\n    localStorage.setItem(\"@HamburgueriaKenzie:accessToken\", accessToken);\n    localStorage.setItem(\"@HamburgueriaKenzie:user\", user);\n    seteData({\n      accessToken,\n      user\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {},\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 10\n  }, this);\n};\n\n_s2(AuthProvider, \"y1WyBH5k8NMxBeghIU5+xMAX9R4=\");\n\n_c = AuthProvider;\nexport { AuthProvider, useAuth };\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["/home/vinicius/atividades/q2/entregas/5A12/react-entrega-s5-hamburgueria-2-0-com-typescript-json-server-vinapro91/src/Provider/authToken.tsx"],"names":["React","createContext","useCallback","useContext","useState","api","AuthContext","useAuth","context","Error","AuthProvider","children","data","seteData","accessToken","localStorage","getItem","user","JSON","parse","singIn","email","password","response","post","date","setItem"],"mappings":";;;;AAAA,OAAOA,KAAP,IACEC,aADF,EAGEC,WAHF,EAIEC,UAJF,EAKEC,QALF,QAMO,OANP;AAQA,SAASC,GAAT,QAAoB,iBAApB;;AAEA,MAAMC,WAAW,gBAAGL,aAAa,CAAC,EAAD,CAAjC;;AAsBA,MAAMM,OAAO,GAAG,MAAM;AAAA;;AACpB,QAAMC,OAAO,GAAGL,UAAU,CAACG,WAAD,CAA1B;;AACA,MAAI,CAACE,OAAL,EAAc;AACZ,UAAM,IAAIC,KAAJ,CAAU,+CAAV,CAAN;AACD;;AACD,SAAOD,OAAP;AACD,CAND;;GAAMD,O;;AAQN,MAAMG,YAAY,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAqC;AAAA;;AACxD,QAAM,CAACC,IAAD,EAAOC,QAAP,IAAmBT,QAAQ,CAAY,MAAM;AACjD,UAAMU,WAAW,GAAGC,YAAY,CAACC,OAAb,CAAqB,iCAArB,CAApB;AACA,UAAMC,IAAI,GAAGF,YAAY,CAACC,OAAb,CAAqB,0BAArB,CAAb;;AAEA,QAAIF,WAAW,IAAIG,IAAnB,EAAyB;AACvB,aAAO;AAAEH,QAAAA,WAAF;AAAeG,QAAAA,IAAI,EAAEC,IAAI,CAACC,KAAL,CAAWF,IAAX;AAArB,OAAP;AACD;;AAED,WAAO,EAAP;AACD,GATgC,CAAjC;AAUA,QAAMG,MAAM,GAAGlB,WAAW,CAAC,OAAO;AAAEmB,IAAAA,KAAF;AAASC,IAAAA;AAAT,GAAP,KAAkD;AAC3E,UAAMC,QAAQ,GAAG,MAAMlB,GAAG,CAACmB,IAAJ,CAAS,QAAT,EAAmB;AAAEH,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAAnB,CAAvB;AAEA,UAAM;AAAER,MAAAA,WAAF;AAAeG,MAAAA;AAAf,QAAwBM,QAAQ,CAACE,IAAvC;AAEAV,IAAAA,YAAY,CAACW,OAAb,CAAqB,iCAArB,EAAwDZ,WAAxD;AACAC,IAAAA,YAAY,CAACW,OAAb,CAAqB,0BAArB,EAAiDT,IAAjD;AACAJ,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,WAAF;AAAeG,MAAAA;AAAf,KAAD,CAAR;AACD,GARyB,EAQvB,EARuB,CAA1B;AASA,sBAAO,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE,EAA7B;AAAA,cAAkCN;AAAlC;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,CArBD;;IAAMD,Y;;KAAAA,Y;AAuBN,SAASA,YAAT,EAAuBH,OAAvB","sourcesContent":["import React, {\n  createContext,\n  ReactNode,\n  useCallback,\n  useContext,\n  useState,\n} from \"react\";\n\nimport { api } from \"../Services/api\";\n\nconst AuthContext = createContext({});\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\ninterface User {\n  email: string;\n  id: string;\n  name: string;\n}\n\ninterface AuthState {\n  accessToken: string;\n  user: User;\n}\n\ninterface singInCredentials {\n  email: string;\n  password: string;\n}\n\nconst useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used witching an AuthProvider\");\n  }\n  return context;\n};\n\nconst AuthProvider = ({ children }: AuthProviderProps) => {\n  const [data, seteData] = useState<AuthState>(() => {\n    const accessToken = localStorage.getItem(\"@HamburgueriaKenzie:accessToken\");\n    const user = localStorage.getItem(\"@HamburgueriaKenzie:user\");\n\n    if (accessToken && user) {\n      return { accessToken, user: JSON.parse(user) };\n    }\n\n    return {} as AuthState;\n  });\n  const singIn = useCallback(async ({ email, password }: singInCredentials) => {\n    const response = await api.post(\"/login\", { email, password });\n\n    const { accessToken, user } = response.date;\n\n    localStorage.setItem(\"@HamburgueriaKenzie:accessToken\", accessToken);\n    localStorage.setItem(\"@HamburgueriaKenzie:user\", user);\n    seteData({ accessToken, user });\n  }, []);\n  return <AuthContext.Provider value={{}}>{children}</AuthContext.Provider>;\n};\n\nexport { AuthProvider, useAuth };\n"]},"metadata":{},"sourceType":"module"}